{"ast":null,"code":"var _jsxFileName = \"/Users/suneilengland/Desktop/DEVELOPMENT/MAJ-ARCADE-V5/src/components/login3.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState, Fragment } from \"react\";\nimport uniqueRandom from 'unique-random';\nimport { useHistory } from \"react-router\";\nimport { useAuth } from \"../Context/AuthContext\";\nimport \"../css/login3.css\";\nimport axios from \"axios\";\nimport TheBackgroundMusic from \"../components/theBackgroundMusic\";\nimport firebase, { db, storage } from \"../firebase\";\nimport useLocalStorage from \"react-use-localstorage\";\nimport { useLocation } from \"react-router-dom\"; // import firebase from '../firebase';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Login3() {\n  _s();\n\n  const location = useLocation(); //signup credentials\n\n  const [email, setEmail] = useState();\n  const [online, setOnline] = useState(\"Offline\");\n  const [user, setUser] = useState({});\n  const [name, setName] = useState(\"\");\n  const [pin, setPin] = useLocalStorage(\"pin\", \"\");\n  const [address, setAddress] = useState(\"\");\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\n  const [image, setImage] = useState(null);\n  const [progress, setProgress] = useState(0);\n  const [error, setError] = useState(\"\");\n  const {\n    login,\n    users,\n    currentUser,\n    uploadData,\n    firestoreLogin,\n    ImageUpload\n  } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const [hasAccount, setHasAccount] = useState(true); // signup credentials\n\n  let history = useHistory();\n\n  const handleImageChange = e => {\n    if (e.target.files[0]) {\n      setImage(e.target.files[0]);\n    }\n  }; // if(location.pathname === \"/login\"){\n  //   console.log('Offlne')\n  // }else{\n  //   console.log('ONline')\n  // }\n  // if(location.pathname === \"/\"){\n  //   console.log('Offlne')\n  // }\n\n\n  const handleDataUpload = () => {\n    if (email === \"\") {\n      console.log(\"Email feild cannot be empty\");\n      alert(\"Please enter an email!\");\n    } else if (name === \"\") {\n      console.log(\"Please enter your name\");\n      alert(\"Please enter your name!\");\n    } else if (phoneNumber === \"\") {\n      console.log(\"Please enter a phone number\");\n      alert(\"Please enter a phone number!\");\n    } else if (address === \"\") {\n      console.log(\"Please enter a valid address\");\n      alert(\"Please enter a valid address!\");\n    } else if (image === null) {\n      console.log(\"Please upload a valid ID picture\");\n      alert(\"Please upload a valid ID picture!\");\n    } else {\n      const uploadTask = storage.ref(`images/${image.name}`).put(image);\n      uploadTask.on(\"state_changed\", snapshot => {\n        const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n        setProgress(progress);\n      }, error => {\n        console.log(error);\n        alert(error.message);\n      }, () => {\n        storage.ref(\"images\").child(image.name).getDownloadURL().then(url => {\n          db.collection(\"UnauthenticatedUsers\").add({\n            address: address,\n            email: email,\n            imageUrl: url,\n            phone: phoneNumber,\n            name: name\n          });\n        });\n      }); // alert.success(\"Data uploaded\");\n    }\n  };\n\n  const createMongoUser = async () => {\n    const loggedUser = {\n      name: name,\n      email: email,\n      pin: random().toString(),\n      phone: phoneNumber,\n      image_url: 'image',\n      address: address,\n      igc: '0',\n      online_status: '#FF0000'\n    };\n    await axios.post(`https://majestic-express-server.herokuapp.com/api/auth/register`, loggedUser) // .post(`http://localhost:5000/api/auth/register`, loggedUser)\n    .then(res => {\n      localStorage.setItem(\"authToken\", user.token);\n\n      if (localStorage.getItem('authToken')) {\n        // navigate('/  app/dashboard', { replace: true });\n        history.push('/games');\n        console.log('test'); // console.log('hey')\n      }\n    }).catch(err => console.log(err.message));\n  };\n\n  useAuth(() => {});\n\n  const handleMongoLogin = async () => {\n    login(email, pin); // const LoginCred = {\n    //   email: email,\n    //   pin: pin,\n    // };\n    // let logged_in_user = '';\n    // await axios\n    //   .post(`https://majestic-express-server.herokuapp.com/api/auth/login`, LoginCred)\n    //   // .post(`http://localhost:5000/api/auth/login`, LoginCred)\n    //   .then((res) => {\n    //     console.log(res.data)\n    //     logged_in_user = res.data\n    //     console.log(logged_in_user)\n    //     localStorage.setItem(\"authToken\", res.data.token)\n    //       if(localStorage.getItem('authToken')){\n    //         // navigate('/  app/dashboard', { replace: true });\n    //         history.push('/games')\n    //         // console.log('hey')\n    //       }\n    //   })\n    //   .catch((error) => {\n    //     setError(error)\n    //     console.log(error.message)\n    //   });\n    //   const setLoggedIn = {\n    //     logged_in: true\n    //   };\n    //   await axios.post(`http://localhost:5000/loggedin/${logged_in_user.loggedUser}`, setLoggedIn)\n    //   await axios.post(`https://majestic-express-server.herokuapp.com/loggedin/${logged_in_user.loggedUser}`, setLoggedIn)\n  }; //  console.log(online)\n\n\n  const handleFirestoreLogin = async () => {\n    // setError('');\n    try {\n      await firestoreLogin(pin); // history.push('/profile')\n      // console.log('success')\n    } catch {\n      setError(\"Failed to login\");\n      console.log(error);\n    }\n  };\n\n  const random = uniqueRandom(100000000000, 999999999999);\n  console.log(random());\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main\",\n    children: [/*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"panel\",\n      children: hasAccount ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panel__half half--first\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Login with your pin code and email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Enter email\",\n              className: \"input-text\",\n              name: \"email\",\n              value: email,\n              onChange: e => setEmail(e.target.value),\n              id: \"parentNumber\",\n              title: \"Email Address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Enter pin\",\n              className: \"input-text\",\n              name: \"pincode\",\n              value: pin,\n              onChange: e => setPin(e.target.value),\n              id: \"parentNumber\",\n              title: \"Email Address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              onClick: handleMongoLogin,\n              className: \"button\",\n              children: \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panel__half half--second\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Hello, friend!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Enter your personal details and start your journey with us\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setHasAccount(!hasAccount),\n            children: \"Sign up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panel__half half--first\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Sign Up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Enter your personal details and start your journey with us\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Name\",\n              className: \"input-text\",\n              name: \"name\",\n              value: name,\n              onChange: e => setName(e.target.value),\n              id: \"parentNumber\",\n              title: \"username\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              placeholder: \"Email\",\n              className: \"input-text\",\n              name: \"email\",\n              value: email,\n              onChange: e => setEmail(e.target.value),\n              id: \"parentNumber\",\n              title: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Address(city, state, zip)\",\n              className: \"input-text\",\n              name: \"address\",\n              value: address,\n              onChange: e => setAddress(e.target.value),\n              id: \"parentNumber\",\n              title: \"address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Phone\",\n              className: \"input-text\",\n              name: \"phone\",\n              value: phoneNumber,\n              onChange: e => setPhoneNumber(e.target.value),\n              id: \"parentNumber\",\n              title: \"Email Address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              onClick: () => {\n                handleDataUpload();\n                createMongoUser();\n              },\n              className: \"button\",\n              children: \"Sign up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panel__half half--second\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Hello, friend!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Returning guest? Login to continue your journey with us\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setHasAccount(!hasAccount),\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TheBackgroundMusic, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 187,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login3, \"ALTjgAkrQ8r8eyFkVMgMpd5XQSE=\", false, function () {\n  return [useLocation, useLocalStorage, useAuth, useHistory, useAuth];\n});\n\n_c = Login3;\nexport default Login3;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login3\");","map":{"version":3,"sources":["/Users/suneilengland/Desktop/DEVELOPMENT/MAJ-ARCADE-V5/src/components/login3.jsx"],"names":["useEffect","useState","Fragment","uniqueRandom","useHistory","useAuth","axios","TheBackgroundMusic","firebase","db","storage","useLocalStorage","useLocation","Login3","location","email","setEmail","online","setOnline","user","setUser","name","setName","pin","setPin","address","setAddress","phoneNumber","setPhoneNumber","image","setImage","progress","setProgress","error","setError","login","users","currentUser","uploadData","firestoreLogin","ImageUpload","loading","setLoading","hasAccount","setHasAccount","history","handleImageChange","e","target","files","handleDataUpload","console","log","alert","uploadTask","ref","put","on","snapshot","Math","round","bytesTransferred","totalBytes","message","child","getDownloadURL","then","url","collection","add","imageUrl","phone","createMongoUser","loggedUser","random","toString","image_url","igc","online_status","post","res","localStorage","setItem","token","getItem","push","catch","err","handleMongoLogin","handleFirestoreLogin","value"],"mappings":"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","sourcesContent":["import { useEffect, useState, Fragment } from \"react\";\nimport uniqueRandom from 'unique-random';\nimport { useHistory } from \"react-router\";\nimport { useAuth } from \"../Context/AuthContext\";\nimport \"../css/login3.css\";\nimport axios from \"axios\";\n\nimport TheBackgroundMusic from \"../components/theBackgroundMusic\";\nimport firebase, { db, storage } from \"../firebase\";\n\nimport useLocalStorage from \"react-use-localstorage\";\nimport { useLocation } from \"react-router-dom\";\n\n// import firebase from '../firebase';\n\nfunction Login3() {\n  const location = useLocation();\n  //signup credentials\n  const [email, setEmail] = useState();\n  const [online, setOnline] = useState(\"Offline\");\n  const [user, setUser] = useState({});\n  const [name, setName] = useState(\"\");\n  const [pin, setPin] = useLocalStorage(\"pin\", \"\");\n  const [address, setAddress] = useState(\"\");\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\n  const [image, setImage] = useState(null);\n  const [progress, setProgress] = useState(0);\n  const [error, setError] = useState(\"\");\n  const { login, users, currentUser, uploadData, firestoreLogin, ImageUpload } =\n    useAuth();\n  const [loading, setLoading] = useState(false);\n  const [hasAccount, setHasAccount] = useState(true);\n  // signup credentials\n\n  let history = useHistory();\n\n  const handleImageChange = (e) => {\n    if (e.target.files[0]) {\n      setImage(e.target.files[0]);\n    }\n  };\n\n  // if(location.pathname === \"/login\"){\n  //   console.log('Offlne')\n  // }else{\n  //   console.log('ONline')\n  // }\n\n  // if(location.pathname === \"/\"){\n  //   console.log('Offlne')\n  // }\n\n  const handleDataUpload = () => {\n    if (email === \"\") {\n      console.log(\"Email feild cannot be empty\");\n      alert(\"Please enter an email!\");\n    } else if (name === \"\") {\n      console.log(\"Please enter your name\");\n      alert(\"Please enter your name!\");\n    } else if (phoneNumber === \"\") {\n      console.log(\"Please enter a phone number\");\n      alert(\"Please enter a phone number!\");\n    } else if (address === \"\") {\n      console.log(\"Please enter a valid address\");\n      alert(\"Please enter a valid address!\");\n    } else if (image === null) {\n      console.log(\"Please upload a valid ID picture\");\n      alert(\"Please upload a valid ID picture!\");\n    } else {\n      const uploadTask = storage.ref(`images/${image.name}`).put(image);\n      uploadTask.on(\n        \"state_changed\",\n        (snapshot) => {\n          const progress = Math.round(\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n          );\n          setProgress(progress);\n        },\n        (error) => {\n          console.log(error);\n          alert(error.message);\n        },\n        () => {\n          storage\n            .ref(\"images\")\n            .child(image.name)\n            .getDownloadURL()\n            .then((url) => {\n              db.collection(\"UnauthenticatedUsers\").add({\n                address: address,\n                email: email,\n                imageUrl: url,\n                phone: phoneNumber,\n                name: name,\n              });\n            });\n        }\n      );\n      // alert.success(\"Data uploaded\");\n    }\n  };\n\n  const createMongoUser = async () => {\n    const loggedUser = {\n      name: name,\n      email: email,\n      pin: random().toString(),\n      phone: phoneNumber,\n      image_url: 'image',\n      address: address,\n      igc: '0',\n      online_status: '#FF0000',\n    };\n\n    await axios\n      .post(`https://majestic-express-server.herokuapp.com/api/auth/register`, loggedUser)\n      // .post(`http://localhost:5000/api/auth/register`, loggedUser)\n      .then((res) => {\n        localStorage.setItem(\"authToken\", user.token)\n        if(localStorage.getItem('authToken')){\n          // navigate('/  app/dashboard', { replace: true });\n          history.push('/games')\n          console.log('test')\n          // console.log('hey')\n        }\n      })\n      .catch((err) => console.log(err.message));\n  };\n\n  useAuth(() => {\n    \n  })\n\n  const handleMongoLogin = async () => {\n    login(email, pin)\n    // const LoginCred = {\n    //   email: email,\n    //   pin: pin,\n    // };\n\n    // let logged_in_user = '';\n\n    // await axios\n    //   .post(`https://majestic-express-server.herokuapp.com/api/auth/login`, LoginCred)\n    //   // .post(`http://localhost:5000/api/auth/login`, LoginCred)\n    //   .then((res) => {\n    //     console.log(res.data)\n    //     logged_in_user = res.data\n    //     console.log(logged_in_user)\n    //     localStorage.setItem(\"authToken\", res.data.token)\n    //       if(localStorage.getItem('authToken')){\n    //         // navigate('/  app/dashboard', { replace: true });\n    //         history.push('/games')\n    //         // console.log('hey')\n    //       }\n    //   })\n    //   .catch((error) => {\n    //     setError(error)\n    //     console.log(error.message)\n    //   });\n\n    //   const setLoggedIn = {\n    //     logged_in: true\n    //   };\n\n    //   await axios.post(`http://localhost:5000/loggedin/${logged_in_user.loggedUser}`, setLoggedIn)\n    //   await axios.post(`https://majestic-express-server.herokuapp.com/loggedin/${logged_in_user.loggedUser}`, setLoggedIn)\n  }\n\n  //  console.log(online)\n  const handleFirestoreLogin = async () => {\n    // setError('');\n    try {\n      await firestoreLogin(pin);\n      // history.push('/profile')\n      // console.log('success')\n    } catch {\n      setError(\"Failed to login\");\n      console.log(error);\n    }\n  };\n\n  const random = uniqueRandom(100000000000, 999999999999);\n  console.log(random());\n\n  return (\n    <div className=\"main\">\n      <main className=\"panel\">\n        {hasAccount ? (\n          <>\n            <div className=\"panel__half half--first\">\n              <h2>Login</h2>\n              <p>Login with your pin code and email</p>\n              <div className=\"input\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Enter email\"\n                  className=\"input-text\"\n                  name=\"email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  id=\"parentNumber\"\n                  title=\"Email Address\"\n                />\n                    <p></p>\n                <input\n                  type=\"text\"\n                  placeholder=\"Enter pin\"\n                  className=\"input-text\"\n                  name=\"pincode\"\n                  value={pin}\n                  onChange={(e) => setPin(e.target.value)}\n                  id=\"parentNumber\"\n                  title=\"Email Address\"\n                />\n\n                <button\n                  type=\"submit\"\n                  onClick={handleMongoLogin}\n                  className=\"button\"\n                >\n                  Login\n                </button>\n              </div>\n            </div>\n\n            <div className=\"panel__half half--second\">\n              <h2>Hello, friend!</h2>\n              <p>Enter your personal details and start your journey with us</p>\n              <button onClick={() => setHasAccount(!hasAccount)}>\n                Sign up\n              </button>\n            </div>\n          </>\n        ) : (\n          <>\n            <div className=\"panel__half half--first\">\n              <h2>Sign Up</h2>\n              <p>Enter your personal details and start your journey with us</p>\n              <div className=\"input\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Name\"\n                  className=\"input-text\"\n                  name=\"name\"\n                  value={name}\n                  onChange={(e) => setName(e.target.value)}\n                  id=\"parentNumber\"\n                  title=\"username\"\n                />\n\n                <p></p>\n\n                <input\n                  type=\"email\"\n                  placeholder=\"Email\"\n                  className=\"input-text\"\n                  name=\"email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  id=\"parentNumber\"\n                  title=\"Email\"\n                />\n\n                <p></p>\n\n                <input\n                  type=\"text\"\n                  placeholder=\"Address(city, state, zip)\"\n                  className=\"input-text\"\n                  name=\"address\"\n                  value={address}\n                  onChange={(e) => setAddress(e.target.value)}\n                  id=\"parentNumber\"\n                  title=\"address\"\n                />\n\n                <p></p>\n\n                <input\n                  type=\"text\"\n                  placeholder=\"Phone\"\n                  className=\"input-text\"\n                  name=\"phone\"\n                  value={phoneNumber}\n                  onChange={(e) => setPhoneNumber(e.target.value)}\n                  id=\"parentNumber\"\n                  title=\"Email Address\"\n                />\n\n                <p></p>\n\n                {/* <input\n                  type=\"file\"\n                  placeholder=\"Choose photo\"\n                  className=\"input-text\"\n                  name=\"phone\"\n                  onChange={handleImageChange}\n                  id=\"fileUpload\"\n                  title=\"image\"\n                /> */}\n\n                <button\n                  type=\"submit\"\n                  onClick={() => {\n                    handleDataUpload();\n                    createMongoUser();\n                  }}\n                  className=\"button\"\n                >\n                  Sign up\n                </button>\n              </div>\n            </div>\n\n            <div className=\"panel__half half--second\">\n              <h2>Hello, friend!</h2>\n              <p>Returning guest? Login to continue your journey with us</p>\n              <button onClick={() => setHasAccount(!hasAccount)}>Login</button>\n            </div>\n          </>\n        )}\n        {/* <div className=\"panel__half half--first\">\n          <h2>Sign up</h2>\n          <p>Login with your email account</p>\n          <div className=\"input\">\n            <input type=\"text\" placeholder=\"Email\" \n              className=\"input-text\"\n              name=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              id=\"parentNumber\"\n              title=\"Email Address\"\n            />\n            <button type=\"submit\" onClick={handleFirestoreLogin} className=\"button\">\n                  Login\n            </button>\n          </div>\n        </div>\n       \n        <div className=\"panel__half half--second\">\n          <h2>Hello, friend!</h2>\n          <p>Enter your personal details and start your journey with us</p>\n          <button>Sign up</button>\n        </div> */}\n      </main>\n      <TheBackgroundMusic />\n    </div>\n  );\n}\n\nexport default Login3;\n"]},"metadata":{},"sourceType":"module"}