{"ast":null,"code":"var _jsxFileName = \"/Users/suneilengland/Desktop/DEVELOPMENT/MAJ-ARCADE-V5/src/components/signup.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState, Fragment } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { useAuth } from \"../Context/AuthContext\";\nimport \"../css/login3.css\";\nimport axios from \"axios\";\nimport TheBackgroundMusic from \"../components/theBackgroundMusic\";\nimport firebase, { db, storage } from \"../firebase\";\nimport useLocalStorage from \"react-use-localstorage\";\nimport { useLocation } from \"react-router-dom\"; // import firebase from '../firebase';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Signup() {\n  _s();\n\n  const location = useLocation(); //signup credentials\n\n  const [email, setEmail] = useState();\n  const [online, setOnline] = useState(\"Offline\");\n  const [name, setName] = useState(\"\");\n  const [pin, setPin] = useLocalStorage(\"pin\", \"\");\n  const [address, setAddress] = useState(\"\");\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\n  const [image, setImage] = useState(null);\n  const [progress, setProgress] = useState(0);\n  const [error, setError] = useState(\"\");\n  const {\n    login,\n    users,\n    currentUser,\n    uploadData,\n    firestoreLogin,\n    ImageUpload\n  } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const [hasAccount, setHasAccount] = useState(true); // signup credentials\n\n  let history = useHistory();\n\n  const handleImageChange = e => {\n    if (e.target.files[0]) {\n      setImage(e.target.files[0]);\n    }\n  }; // if(location.pathname === \"/login\"){\n  //   console.log('Offlne')\n  // }else{\n  //   console.log('ONline')\n  // }\n  // if(location.pathname === \"/\"){\n  //   console.log('Offlne')\n  // }\n\n\n  const handleDataUpload = () => {\n    if (email === \"\") {\n      console.log(\"Email feild cannot be empty\");\n      alert.error(\"Please enter an email!\");\n    } else if (name === \"\") {\n      console.log(\"Please enter your name\");\n      alert.error(\"Please enter your name!\");\n    } else if (phoneNumber === \"\") {\n      console.log(\"Please enter a phone number\");\n      alert.error(\"Please enter a phone number!\");\n    } else if (address === \"\") {\n      console.log(\"Please enter a valid address\");\n      alert.error(\"Please enter a valid address!\");\n    } else if (image === null) {\n      console.log(\"Please upload a valid ID picture\");\n      alert.error(\"Please upload a valid ID picture!\");\n    } else {\n      const uploadTask = storage.ref(`images/${image.name}`).put(image);\n      uploadTask.on(\"state_changed\", snapshot => {\n        const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n        setProgress(progress);\n      }, error => {\n        console.log(error);\n        alert(error.message);\n      }, () => {\n        storage.ref(\"images\").child(image.name).getDownloadURL().then(url => {\n          db.collection(\"UnauthenticatedUsers\").add({\n            address: address,\n            email: email,\n            imageUrl: url,\n            phone: phoneNumber,\n            name: name\n          });\n        });\n      });\n      alert.success(\"Data uploaded\");\n    }\n  };\n\n  const createMongoUser = async () => {\n    const newUser = {\n      name: name,\n      pin: \"0\",\n      phone: phoneNumber,\n      email: email,\n      address: address,\n      igc: \"0\",\n      imageUrl: image\n    };\n    await axios.post(`https://majesticserver.herokuapp.com/createuser`, newUser).then(res => console.log(res.data)).catch(err => console.log(err.message));\n  }; //  console.log(online)\n\n\n  const handleFirestoreLogin = async () => {\n    // setError('');\n    try {\n      await firestoreLogin(pin); // history.push('/profile')\n      // console.log('success')\n    } catch {\n      setError(\"Failed to login\");\n      console.log(error);\n    }\n  }; // console.log(image)\n  // const handleUploadData = async () => {\n  //   // handleImage()\n  //   // await uploadData(email, name, address, phoneNumber)\n  //       //  await imageUpload(image)\n  // }\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main\",\n    children: [/*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"panel\",\n      children: !hasAccount ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panel__half half--first\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Login with your pin code\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Enter pin\",\n              className: \"input-text\",\n              name: \"pincode\",\n              value: pin,\n              onChange: e => setPin(e.target.value),\n              id: \"parentNumber\",\n              title: \"Email Address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              onClick: () => {\n                handleFirestoreLogin();\n              },\n              className: \"button\",\n              children: \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panel__half half--second\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Hello, friend!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Enter your personal details and start your journey with us\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setHasAccount(!hasAccount),\n            children: \"Sign up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panel__half half--first\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Sign Up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Enter your personal details and start your journey with us\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Name\",\n              className: \"input-text\",\n              name: \"name\",\n              value: name,\n              onChange: e => setName(e.target.value),\n              id: \"parentNumber\",\n              title: \"username\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              placeholder: \"Email\",\n              className: \"input-text\",\n              name: \"email\",\n              value: email,\n              onChange: e => setEmail(e.target.value),\n              id: \"parentNumber\",\n              title: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Address(city, state, zip)\",\n              className: \"input-text\",\n              name: \"address\",\n              value: address,\n              onChange: e => setAddress(e.target.value),\n              id: \"parentNumber\",\n              title: \"address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Phone\",\n              className: \"input-text\",\n              name: \"phone\",\n              value: phoneNumber,\n              onChange: e => setPhoneNumber(e.target.value),\n              id: \"parentNumber\",\n              title: \"Email Address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              placeholder: \"Choose photo\",\n              className: \"input-text\",\n              name: \"phone\",\n              onChange: handleImageChange,\n              id: \"fileUpload\",\n              title: \"image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              onClick: () => {\n                handleDataUpload();\n                createMongoUser();\n              },\n              className: \"button\",\n              children: \"Sign up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panel__half half--second\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Hello, friend!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Returning guest? Login to continue your journey with us\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setHasAccount(!hasAccount),\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TheBackgroundMusic, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Signup, \"giHffAUpPV54HpuphNRIl7EsGhM=\", false, function () {\n  return [useLocation, useLocalStorage, useAuth, useHistory];\n});\n\n_c = Signup;\nexport default Signup;\n\nvar _c;\n\n$RefreshReg$(_c, \"Signup\");","map":{"version":3,"sources":["/Users/suneilengland/Desktop/DEVELOPMENT/MAJ-ARCADE-V5/src/components/signup.jsx"],"names":["useEffect","useState","Fragment","useHistory","useAuth","axios","TheBackgroundMusic","firebase","db","storage","useLocalStorage","useLocation","Signup","location","email","setEmail","online","setOnline","name","setName","pin","setPin","address","setAddress","phoneNumber","setPhoneNumber","image","setImage","progress","setProgress","error","setError","login","users","currentUser","uploadData","firestoreLogin","ImageUpload","loading","setLoading","hasAccount","setHasAccount","history","handleImageChange","e","target","files","handleDataUpload","console","log","alert","uploadTask","ref","put","on","snapshot","Math","round","bytesTransferred","totalBytes","message","child","getDownloadURL","then","url","collection","add","imageUrl","phone","success","createMongoUser","newUser","igc","post","res","data","catch","err","handleFirestoreLogin","value"],"mappings":"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","sourcesContent":["import { useEffect, useState, Fragment } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { useAuth } from \"../Context/AuthContext\";\nimport \"../css/login3.css\";\nimport axios from \"axios\";\n\nimport TheBackgroundMusic from \"../components/theBackgroundMusic\";\nimport firebase, { db, storage } from \"../firebase\";\n\nimport useLocalStorage from \"react-use-localstorage\";\nimport { useLocation } from \"react-router-dom\";\n\n// import firebase from '../firebase';\n\nfunction Signup() {\n  const location = useLocation();\n  //signup credentials\n  const [email, setEmail] = useState();\n  const [online, setOnline] = useState(\"Offline\");\n  const [name, setName] = useState(\"\");\n  const [pin, setPin] = useLocalStorage(\"pin\", \"\");\n  const [address, setAddress] = useState(\"\");\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\n  const [image, setImage] = useState(null);\n  const [progress, setProgress] = useState(0);\n  const [error, setError] = useState(\"\");\n  const { login, users, currentUser, uploadData, firestoreLogin, ImageUpload } =\n    useAuth();\n  const [loading, setLoading] = useState(false);\n  const [hasAccount, setHasAccount] = useState(true);\n  // signup credentials\n\n  let history = useHistory();\n\n  const handleImageChange = (e) => {\n    if (e.target.files[0]) {\n      setImage(e.target.files[0]);\n    }\n  };\n\n  // if(location.pathname === \"/login\"){\n  //   console.log('Offlne')\n  // }else{\n  //   console.log('ONline')\n  // }\n\n  // if(location.pathname === \"/\"){\n  //   console.log('Offlne')\n  // }\n\n  const handleDataUpload = () => {\n    if (email === \"\") {\n      console.log(\"Email feild cannot be empty\");\n      alert.error(\"Please enter an email!\");\n    } else if (name === \"\") {\n      console.log(\"Please enter your name\");\n      alert.error(\"Please enter your name!\");\n    } else if (phoneNumber === \"\") {\n      console.log(\"Please enter a phone number\");\n      alert.error(\"Please enter a phone number!\");\n    } else if (address === \"\") {\n      console.log(\"Please enter a valid address\");\n      alert.error(\"Please enter a valid address!\");\n    } else if (image === null) {\n      console.log(\"Please upload a valid ID picture\");\n      alert.error(\"Please upload a valid ID picture!\");\n    } else {\n      const uploadTask = storage.ref(`images/${image.name}`).put(image);\n      uploadTask.on(\n        \"state_changed\",\n        (snapshot) => {\n          const progress = Math.round(\n            (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n          );\n          setProgress(progress);\n        },\n        (error) => {\n          console.log(error);\n          alert(error.message);\n        },\n        () => {\n          storage\n            .ref(\"images\")\n            .child(image.name)\n            .getDownloadURL()\n            .then((url) => {\n              db.collection(\"UnauthenticatedUsers\").add({\n                address: address,\n                email: email,\n                imageUrl: url,\n                phone: phoneNumber,\n                name: name,\n              });\n            });\n        }\n      );\n      alert.success(\"Data uploaded\");\n    }\n  };\n\n  const createMongoUser = async () => {\n    const newUser = {\n      name: name,\n      pin: \"0\",\n      phone: phoneNumber,\n      email: email,\n      address: address,\n      igc: \"0\",\n      imageUrl: image,\n    };\n\n    await axios\n      .post(`https://majesticserver.herokuapp.com/createuser`, newUser)\n      .then((res) => console.log(res.data))\n      .catch((err) => console.log(err.message));\n  };\n\n  //  console.log(online)\n  const handleFirestoreLogin = async () => {\n    // setError('');\n    try {\n      await firestoreLogin(pin);\n      // history.push('/profile')\n      // console.log('success')\n    } catch {\n      setError(\"Failed to login\");\n      console.log(error);\n    }\n  };\n\n  // console.log(image)\n\n  // const handleUploadData = async () => {\n  //   // handleImage()\n  //   // await uploadData(email, name, address, phoneNumber)\n  //       //  await imageUpload(image)\n  // }\n\n  return (\n    <div className=\"main\">\n      <main className=\"panel\">\n        {!hasAccount ? (\n          <>\n            <div className=\"panel__half half--first\">\n              <h2>Login</h2>\n              <p>Login with your pin code</p>\n              <div className=\"input\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Enter pin\"\n                  className=\"input-text\"\n                  name=\"pincode\"\n                  value={pin}\n                  onChange={(e) => setPin(e.target.value)}\n                  id=\"parentNumber\"\n                  title=\"Email Address\"\n                />\n                <button\n                  type=\"submit\"\n                  onClick={() => {\n                    handleFirestoreLogin();\n                  }}\n                  className=\"button\"\n                >\n                  Login\n                </button>\n              </div>\n            </div>\n\n            <div className=\"panel__half half--second\">\n              <h2>Hello, friend!</h2>\n              <p>Enter your personal details and start your journey with us</p>\n              <button onClick={() => setHasAccount(!hasAccount)}>\n                Sign up\n              </button>\n            </div>\n          </>\n        ) : (\n          <>\n            <div className=\"panel__half half--first\">\n              <h2>Sign Up</h2>\n              <p>Enter your personal details and start your journey with us</p>\n              <div className=\"input\">\n                <input\n                  type=\"text\"\n                  placeholder=\"Name\"\n                  className=\"input-text\"\n                  name=\"name\"\n                  value={name}\n                  onChange={(e) => setName(e.target.value)}\n                  id=\"parentNumber\"\n                  title=\"username\"\n                />\n\n                <p></p>\n\n                <input\n                  type=\"email\"\n                  placeholder=\"Email\"\n                  className=\"input-text\"\n                  name=\"email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  id=\"parentNumber\"\n                  title=\"Email\"\n                />\n\n                <p></p>\n\n                <input\n                  type=\"text\"\n                  placeholder=\"Address(city, state, zip)\"\n                  className=\"input-text\"\n                  name=\"address\"\n                  value={address}\n                  onChange={(e) => setAddress(e.target.value)}\n                  id=\"parentNumber\"\n                  title=\"address\"\n                />\n\n                <p></p>\n\n                <input\n                  type=\"text\"\n                  placeholder=\"Phone\"\n                  className=\"input-text\"\n                  name=\"phone\"\n                  value={phoneNumber}\n                  onChange={(e) => setPhoneNumber(e.target.value)}\n                  id=\"parentNumber\"\n                  title=\"Email Address\"\n                />\n\n                <p></p>\n\n                <input\n                  type=\"file\"\n                  placeholder=\"Choose photo\"\n                  className=\"input-text\"\n                  name=\"phone\"\n                  onChange={handleImageChange}\n                  id=\"fileUpload\"\n                  title=\"image\"\n                />\n\n                <button\n                  type=\"submit\"\n                  onClick={() => {\n                    handleDataUpload();\n                    createMongoUser();\n                  }}\n                  className=\"button\"\n                >\n                  Sign up\n                </button>\n              </div>\n            </div>\n\n            <div className=\"panel__half half--second\">\n              <h2>Hello, friend!</h2>\n              <p>Returning guest? Login to continue your journey with us</p>\n              <button onClick={() => setHasAccount(!hasAccount)}>Login</button>\n            </div>\n          </>\n        )}\n        {/* <div className=\"panel__half half--first\">\n          <h2>Sign up</h2>\n          <p>Login with your email account</p>\n          <div className=\"input\">\n            <input type=\"text\" placeholder=\"Email\" \n              className=\"input-text\"\n              name=\"email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              id=\"parentNumber\"\n              title=\"Email Address\"\n            />\n            <button type=\"submit\" onClick={handleFirestoreLogin} className=\"button\">\n                  Login\n            </button>\n          </div>\n        </div>\n       \n        <div className=\"panel__half half--second\">\n          <h2>Hello, friend!</h2>\n          <p>Enter your personal details and start your journey with us</p>\n          <button>Sign up</button>\n        </div> */}\n      </main>\n      <TheBackgroundMusic />\n    </div>\n  );\n}\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}